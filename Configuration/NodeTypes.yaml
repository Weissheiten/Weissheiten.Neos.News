# Base Node
'Weissheiten.Neos.News:AbstractNews':
  label: "${(q(node).filterByDate('archiveDate', Date.Now(),'>').count()) > 0 ? String.trim(String.stripTags(q(node).property('title'))) : '[Archived] ' + String.trim(String.stripTags(q(node).property('title')))}"
  abstract: TRUE
  superTypes:
    'TYPO3.Neos:Document' : TRUE
    'TYPO3.Neos.NodeTypes:ImageMixin': TRUE
  constraints:
    nodeTypes:
      '*': false
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'
      constraints:
        nodeTypes:
          '*': FALSE
          'Weissheiten.Neos.News:NewsMediaImage': TRUE
          'Weissheiten.Neos.Bootstrap:Carousel' : TRUE
          'Weissheiten.Neos.News:NewsMediaVideo': TRUE
          'Weissheiten.Neos.News:NewsText': TRUE
  ui:
    label: 'News Item'
    icon: 'icon-edit'
    group: 'news'
    inspector:
      groups:
        general:
          label: 'General'
          position: 10
        media:
          label: 'Medien'
          position: 20
        related:
          label: 'Related'
  properties:
    sortDate:
      type: DateTime
      defaultValue: 'now'
      ui:
        label: 'Sort date'
        inspector:
          group: 'general'
          position: 9
          editorOptions:
            format: 'd-m-Y H:i'
      validation:
        'TYPO3.Neos/Validation/DateTimeValidator': []
    archiveDate:
      type: DateTime
      defaultValue: 'next year'
      ui:
        label: 'Archive date'
        inspector:
          group: 'general'
          position: 10
          editorOptions:
            format: 'd-m-Y H:i'
      validation:
        'TYPO3.Neos/Validation/DateTimeValidator': []
    title:
      type: string
      ui:
        inlineEditable: true
        inspector:
          group: null
        aloha:
          placeholder: 'Enter title here'
          format:
            b: false
            i: false
            u: false
            sub: false
            sup: false
            p: false
            h1: false
            h2: false
            h3: false
            pre: false
            removeFormat: false
          table: { }
          list: { }
          link:
            a: true
          alignment: { }
    important:
      type: boolean
      ui:
        label: Important
        inspector:
          group: general
    teaser:
      type: string
      ui:
        label: 'Teaser text'
        inlineEditable: true
        inspector:
          group: null
        aloha:
          placeholder: 'Enter teaser here'
          format:
            b: true
            i: true
            u: false
            sub: false
            sup: false
            p: true
            h1: false
            h2: false
            h3: false
            pre: false
            removeFormat: false
          table: {  }
          list: {  }
          link:
            a: true
          alignment: { }
    categories:
      type: references
      ui:
        label: 'Categories'
        inspector:
          group: 'related'
          editorOptions:
            nodeTypes: ['Weissheiten.Neos.News:Category']
    author:
      type: reference
      ui:
        label: 'Author'
        inspector:
          group: 'related'
          editorOptions:
            nodeTypes: ['Weissheiten.Neos.News:Author']

    related:
      type: references
      ui:
        label: 'Related News'
        inspector:
          group: 'related'
          editorOptions:
            nodeTypes: ['Weissheiten.Neos.News:AbstractNews']
    tags:
      type: string
      ui:
        label: 'Tags'
        reloadIfChanged: FALSE
        inspector:
          group: 'related'
    image:
      ui:
        label: 'Vorschaubild'
        reloadIfChanged: TRUE
        inspector:
          editorOptions:
            features:
              crop: TRUE
              resize: FALSE
            crop:
              aspectRatio:
                options:
                  fourFive: ~
                  fiveSeven: ~
                  twoThree: ~
                  fourThree: ~
                  sixteenNine: ~
                enableOriginal: FALSE
                allowCustom: FALSE

'Weissheiten.Neos.News:News':
  superTypes:
    'Weissheiten.Neos.News:AbstractNews' : TRUE

'Weissheiten.Neos.News:Event':
  superTypes:
    'Weissheiten.Neos.News:AbstractNews' : TRUE
  ui:
    label: 'Veranstaltung'
    icon: 'icon-calendar'
    group: 'news'
    inspector:
      groups:
        dateplace:
          label: 'Termin & Ort'
          position: 15
  properties:
    eventDate:
      type: DateTime
      defaultValue: 'now'
      ui:
        label: 'Veranstaltungsdatum'
        inspector:
          group: 'dateplace'
          position: 5
          editorOptions:
            format: 'd-m-Y H:i'
      validation:
        'TYPO3.Neos/Validation/DateTimeValidator': []
    eventEnd:
      type: DateTime
      ui:
        label: 'Veranstaltungsende'
        inspector:
          group: 'dateplace'
          position: 6
          editorOptions:
            format: 'd-m-Y H:i'
      validation:
        'TYPO3.Neos/Validation/DateTimeValidator': []
    place:
      type: references
      ui:
        label: 'Veranstaltungsort (wenn intern)'
        inspector:
          group: 'dateplace'
          editorOptions:
            nodeTypes: ['Billardcafe.Home:Outlet']
    externalplace:
      type: string
      defaultValue: ''
      ui:
        label: 'Veranstaltungsort (wenn extern)'
        inlineEditable: false
        inspector:
          group: 'dateplace'

# Categories - Subcategories are reflected by creating categories within categories in the tree (see constraints)
'Weissheiten.Neos.News:Category':
  superTypes:
    'TYPO3.Neos:Document' : TRUE
  constraints:
    nodeTypes:
      '*': false
      'Weissheiten.Neos.News:Category': true
  ui:
    label: 'Category'
    icon: 'icon-book'
    group: 'news'
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'

'Weissheiten.Neos.News:Author':
  superTypes:
    'TYPO3.Neos:Document': TRUE
    'TYPO3.Neos.NodeTypes:ImageMixin': TRUE
  constraints:
    nodeTypes:
      '*': false
  ui:
    label: 'Author'
    icon: 'icon-user'
    group: 'news'
    inspector:
      groups:
        general:
          label: 'General'
          position: 5
  childNodes:
    main:
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    name:
      type: string
      ui:
        label: 'Autoren Name'
        inspector:
          group: 'general'
    email:
      type: string
      ui:
        label: 'Autoren E-Mail'
        inlineEditable: true
        aloha:
          placeholder: 'Autoren E-Mail'
          format:
            b: false
            i: false
            u: false
            sub: false
            sup: false
            p: false
            h1: false
            h2: false
            h3: false
            pre: false
            removeFormat: false
          table: { }
          list: { }
          link:
            a: true
          alignment: { }
        inspector:
          group: 'general'
    image:
      ui:
        label: 'Autoren Bild'
        reloadIfChanged: TRUE
        inspector:
          editorOptions:
            features:
              crop: TRUE
              resize: FALSE
            crop:
              aspectRatio:
                options:
                  fourFive: ~
                  fiveSeven: ~
                  twoThree: ~
                  fourThree: ~
                  sixteenNine: ~
                enableOriginal: FALSE
                allowCustom: FALSE

'Weissheiten.Neos.News:NewsList':
  superTypes:
    'TYPO3.Neos:Content' : TRUE
  ui:
    label: 'News list'
    icon: icon-list
    inlineEditable: true
    group: 'news'
  constraints:
    nodeTypes:
      '*': false

'Weissheiten.Neos.News:NewsArchive':
  superTypes:
    'Weissheiten.Neos.News:NewsList': TRUE
  ui:
    label: 'News archive'

'Weissheiten.Neos.News:NewsLatest':
  superTypes:
    'TYPO3.Neos:Content' : TRUE
  ui:
    label: 'News latest'
    icon: icon-list
    inlineEditable: true
    group: 'news'
    inspector:
      groups:
        general:
          label: 'General'
          position: 10
        related:
          label: 'Related'
  properties:
    related:
      type: reference
      ui:
        label: 'weiterführender Link'
        inspector:
          group: 'related'
          editorOptions:
            nodeTypes: ['TYPO3.Neos.NodeTypes:Page']
    linktext:
      type: string
      defaultValue: ''
      ui:
        label: 'Linktext'
        reloadIfChanged: TRUE
        inlineEditable: false
        inspector:
          group: 'related'
  constraints:
    nodeTypes:
      '*': false

'Weissheiten.Neos.News:EventLatest':
  superTypes:
    'Weissheiten.Neos.News:NewsLatest' : TRUE
  ui:
    label: 'Veranstaltungsübersicht Teaser'
    icon: icon-list

'Weissheiten.Neos.News:EventList':
  superTypes:
    'TYPO3.Neos:Content' : TRUE
  ui:
    label: 'Veranstaltungskalender'
    icon: icon-list
    inlineEditable: true
    group: 'news'
    inspector:
      groups:
        general:
          label: 'General'
          position: 10
        related:
          label: 'Referenzen'
  properties:
    entryPoint:
      type: reference
      ui:
        label: 'Ausgangspunkt'
        inspector:
          group: related
          editorOptions:
            nodeTypes: ['TYPO3.Neos.NodeTypes:Page']
  constraints:
    nodeTypes:
      '*': false

'Weissheiten.Neos.News:NewsText':
  superTypes:
    'TYPO3.Neos.NodeTypes:Text': TRUE
  ui:
    group: 'news'
    label: NewsText
    icon: 'icon-file-text'
  properties:
    text:
      ui:
        position: 200
        aloha:
          'format': # Enable specific formatting options.
            'strong': true
            'b': false
            'em': true
            'i': false
            'u': true
            'sub': false
            'sup': false
            'p': true
            'h1': false
            'h2': false
            'h3': false
            'h4': true
            'h5': true
            'h6': true
            'code': false
            'removeFormat': true
          'table':
            'table': true
          'link':
            'a': true
          'list':
            'ul': true
            'ol': true
          'alignment':
            'left': true
            'center': true
            'right': true
            'justify': true
          'formatlesspaste':
            'button': true # Show toggle button for formatless pasting.
            'formatlessPasteOption': true # Whether the format less pasting should be enable by default.
            'autoparagraph': true # Automatically wrap non-wrapped text blocks in paragraph blocks.

'Weissheiten.Neos.News:NewsMedia':
  abstract: TRUE
  ui:
    group: 'news'
    inspector:
      groups:
        media:
          label: 'Medien'
          position: 4
    inlineEditable: TRUE
  properties:
    displayStyle:
      type: string
      defaultValue: 'poster'
      ui:
        label: 'Medienstil'
        inspector:
          group: 'media'
          editor: 'TYPO3.Neos/Inspector/Editors/SelectBoxEditor'
          editorOptions:
            values:
              'poster':
                label: 'Poster Format'
              'flavor':
                label: 'Auflockerungs Format'

'Weissheiten.Neos.News:NewsMediaImage':
  superTypes:
    'Weissheiten.Neos.Bootstrap:ResponsiveImage' : TRUE
    'Weissheiten.Neos.News:NewsMedia' : TRUE
  ui:
    label: 'Newsbeitrag Bild'
  properties:
    imageStyle:
      ui: ~
    alignment:
      ui: ~
    responsive:
      ui: ~

'Weissheiten.Neos.News:NewsMediaVideo':
  superTypes:
    'Weissheiten.Neos.Bootstrap:YouTube' : TRUE
    'Weissheiten.Neos.News:NewsMedia' : TRUE
  ui:
    label: 'Newsbeitrag Video'